<section class="panier-container" *ngIf="items.length > 0; else panierVide">

    <h2>Mon panier</h2>

    <div class="panier-item" *ngFor="let item of items">
        <div class="item-info">
            <h4>{{ item.produit.nom }}</h4>
            <p>{{ item.produit.description }}</p>
            <p>Prix unitaire : {{ item.produit.prixTVAC | number:'1.2-2' }} ‚Ç¨ TVAC</p>
        </div>

        <div class="item-actions">
            <button (click)="diminuer(item.produit.id)">‚àí</button>
            <span class="quantite">{{ item.quantite }}</span>
            <button (click)="augmenter(item.produit.id)">+</button>
            <button class="supprimer" (click)="supprimer(item.produit.id)">üóëÔ∏è</button>
        </div>

        <p *ngIf="messageErreurStock[item.produit.id]" class="message-erreur">
            {{ messageErreurStock[item.produit.id] }}
        </p>
    </div>

    <div class="panier-total">
        <p>Total HTVA : {{ totalHTVA | number:'1.2-2' }} ‚Ç¨</p>
        <p>Total TVAC : <strong>{{ totalTVAC | number:'1.2-2' }} ‚Ç¨</strong></p>
        <p>Articles : {{ totalQuantite }}</p>
    </div>

    <div class="actions-globales">
        <button class="btn-vider" (click)="vider()">üßπ Vider le panier</button>
    </div>

    <div class="confirmation-bloc">
        <div *ngIf="!isConnected()" class="message-connexion">
            ‚ö†Ô∏è Vous devez √™tre connect√© pour valider votre commande.
            <a routerLink="/login">Se connecter</a>
        </div>
        <div [class.disabled]="!isConnected()">
            <h3>R√©sum√© de votre commande :</h3>
            <ul>
                <li *ngFor="let item of items">
                    {{ item.quantite }} √ó {{ item.produit.nom }} ‚Äî {{ item.produit.prixTVAC | number:'1.2-2' }} ‚Ç¨
                </li>
            </ul>
            <p><strong>Total :</strong> {{ totalTVAC | number:'1.2-2' }} ‚Ç¨</p>
            <p>Souhaitez-vous confirmer cette commande ?</p>
            <button class="btn-commander" [disabled]="!isConnected()" (click)="passerCommande()">
                ‚úÖ Oui, confirmer
            </button>
        </div>
    </div>

</section>

<ng-template #panierVide>
    <p class="panier-vide">Votre panier est vide.</p>
</ng-template>